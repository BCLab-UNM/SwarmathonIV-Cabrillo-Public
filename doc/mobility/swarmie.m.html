<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>mobility.swarmie API documentation</title>
    <meta name="description" content="Common rover interface in Python" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#mobility.swarmie.swarmie_lock">swarmie_lock</a></li>
  </ul>

    </li>


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.AbortException">AbortException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.AbortException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.DriveException">DriveException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.DriveException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.HomeException">HomeException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.HomeException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.Location">Location</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.Location.__init__">__init__</a></li>
    <li class="mono"><a href="#mobility.swarmie.Location.at_goal">at_goal</a></li>
    <li class="mono"><a href="#mobility.swarmie.Location.get_pose">get_pose</a></li>
    <li class="mono"><a href="#mobility.swarmie.Location.get_variances">get_variances</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.ObstacleException">ObstacleException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.ObstacleException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.PathException">PathException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.PathException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.Swarmie">Swarmie</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.__init__">__init__</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.circle">circle</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.drive">drive</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.drive_to">drive_to</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.find_nearest_target">find_nearest_target</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.fingers_close">fingers_close</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.fingers_open">fingers_open</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_gps_location">get_gps_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_home_gps_location">get_home_gps_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_home_odom_location">get_home_odom_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_latest_targets">get_latest_targets</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_obstacle_condition">get_obstacle_condition</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_obstacle_map">get_obstacle_map</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_odom_location">get_odom_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.get_target_map">get_target_map</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.go">go</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.has_block">has_block</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.has_home_gps_location">has_home_gps_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.has_home_odom_location">has_home_odom_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.pickup">pickup</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.print_infoLog">print_infoLog</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.print_state_machine">print_state_machine</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.print_status">print_status</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.putdown">putdown</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.set_finger_angle">set_finger_angle</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.set_heading">set_heading</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.set_home_gps_location">set_home_gps_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.set_home_odom_location">set_home_odom_location</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.set_wrist_angle">set_wrist_angle</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.simulator_running">simulator_running</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.start_magnetometer_calibration">start_magnetometer_calibration</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.stop">stop</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.store_magnetometer_calibration">store_magnetometer_calibration</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.timed_drive">timed_drive</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.turn">turn</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.wait">wait</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.wait_for_fix">wait_for_fix</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.wrist_down">wrist_down</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.wrist_middle">wrist_middle</a></li>
    <li class="mono"><a href="#mobility.swarmie.Swarmie.wrist_up">wrist_up</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.TagException">TagException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.TagException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.TimeoutException">TimeoutException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.TimeoutException.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#mobility.swarmie.VisionException">VisionException</a></span>
        
          
  <ul>
    <li class="mono"><a href="#mobility.swarmie.VisionException.__init__">__init__</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">mobility.swarmie</span> module</h1>
  <p>Common rover interface in Python</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie" class="source">
    <div class="codehilite"><pre><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Common rover interface in Python</span>
<span class="sd">&#39;&#39;&#39;</span> 

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span> 

<span class="kn">import</span> <span class="nn">sys</span> 
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">import</span> <span class="nn">math</span> 
<span class="kn">import</span> <span class="nn">random</span> 
<span class="kn">import</span> <span class="nn">angles</span> 
<span class="kn">import</span> <span class="nn">tf</span> 

<span class="kn">from</span> <span class="nn">mobility.srv</span> <span class="kn">import</span> <span class="n">Core</span>
<span class="kn">from</span> <span class="nn">mapping.srv</span> <span class="kn">import</span> <span class="n">FindTarget</span><span class="p">,</span> <span class="n">GetMap</span>
<span class="kn">from</span> <span class="nn">mobility.msg</span> <span class="kn">import</span> <span class="n">MoveResult</span><span class="p">,</span> <span class="n">MoveRequest</span>
<span class="kn">from</span> <span class="nn">swarmie_msgs.msg</span> <span class="kn">import</span> <span class="n">Obstacle</span> 

<span class="kn">from</span> <span class="nn">std_srvs.srv</span> <span class="kn">import</span> <span class="n">Empty</span> 
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">UInt8</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Float32</span>
<span class="kn">from</span> <span class="nn">nav_msgs.msg</span> <span class="kn">import</span> <span class="n">Odometry</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Twist</span><span class="p">,</span> <span class="n">Pose2D</span>
<span class="kn">from</span> <span class="nn">apriltags_ros.msg</span> <span class="kn">import</span> <span class="n">AprilTagDetectionArray</span> 
<span class="kn">from</span> <span class="nn">rospy.numpy_msg</span> <span class="kn">import</span> <span class="n">numpy_msg</span>
<span class="kn">from</span> <span class="nn">grid_map_msgs.msg</span> <span class="kn">import</span> <span class="n">GridMap</span>
<span class="kn">from</span> <span class="nn">mapping</span> <span class="kn">import</span> <span class="n">RoverMap</span> 

<span class="kn">import</span> <span class="nn">threading</span> 
<span class="n">swarmie_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">mobility</span> <span class="kn">import</span> <span class="n">sync</span>

<span class="k">class</span> <span class="nc">DriveException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
    
<span class="k">class</span> <span class="nc">VisionException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">TagException</span><span class="p">(</span><span class="n">VisionException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">HomeException</span><span class="p">(</span><span class="n">VisionException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ObstacleException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span> 

<span class="k">class</span> <span class="nc">PathException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">AbortException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">TimeoutException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Location</span><span class="p">:</span> 
    <span class="sd">&#39;&#39;&#39;A class that encodes an EKF provided location and accessor methods&#39;&#39;&#39;</span> 

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">odo</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">odo</span> 
    
    <span class="k">def</span> <span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a std_msgs.Pose from this Location. Useful because Pose </span>
<span class="sd">        has angles represented as roll, pitch, yaw.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`std_msgs.msg.Pose`) The pose. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">quat</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> 
                <span class="p">]</span>        
        <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">euler_from_quaternion</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span>
        <span class="n">pose</span> <span class="o">=</span> <span class="n">Pose2D</span><span class="p">()</span>
        <span class="n">pose</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
        <span class="n">pose</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> 
        <span class="n">pose</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">y</span> 
        <span class="k">return</span> <span class="n">pose</span>

    <span class="k">def</span> <span class="nf">at_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Determine if the pose is within acceptable distance of this location</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`) True if within the target distance.</span>

<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">goal</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                          <span class="n">goal</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">distance</span>

    <span class="k">def</span> <span class="nf">get_variances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return the X, Y and Z variances from the covariance matrix of this location. </span>
<span class="sd">        Variance is defined as the expectation of the squared deviation of a random </span>
<span class="sd">        variable from its mean. </span>
<span class="sd">        </span>
<span class="sd">        https://en.wikipedia.org/wiki/Variance</span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>
<span class="sd">        </span>
<span class="sd">        * (`tuple`): `(vX, vY, vZ)`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">covariance</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>

<span class="k">class</span> <span class="nc">Swarmie</span><span class="p">:</span> 
    <span class="sd">&#39;&#39;&#39;Class that embodies the Swarmie&#39;s API</span>
<span class="sd">    </span>
<span class="sd">    This is the Python API used to drive the rover. The API interfaces </span>
<span class="sd">    with ROS topics and services to perform action and acquire sensor data. </span>
<span class="sd">    &#39;&#39;&#39;</span> 
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rover</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Constructor.</span>

<span class="sd">        Args:</span>

<span class="sd">        * `rover` (`string`) - Name of the rover.</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">        * `node_suffix` (`string`) - Optional argument to start up this node</span>
<span class="sd">        without killing the main /rover_CONTROLLER node. Used by teleop_keyboard</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">=</span> <span class="n">rover</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span> <span class="o">=</span> <span class="n">AprilTagDetectionArray</span><span class="p">()</span>
        
        <span class="c1"># Intialize this ROS node.</span>
        <span class="k">if</span> <span class="s1">&#39;node_suffix&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">]:</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span><span class="p">)</span>

        <span class="c1"># Create publishiers. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/state_machine&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/status&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/infoLog&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/mode&#39;</span><span class="p">,</span> <span class="n">UInt8</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/fingerAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/wristAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c1"># Wait for necessary services to be online. </span>
        <span class="c1"># Services are APIs calls to other neodes. </span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">)</span>

        <span class="c1"># Numpy-ify the GridMap </span>
        <span class="n">GetMap</span><span class="o">.</span><span class="n">_response_class</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">numpy_msg</span><span class="o">.</span><span class="n">numpy_msg</span><span class="p">(</span><span class="n">GridMap</span><span class="p">)</span>
        
        <span class="c1"># Connect to services.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">,</span> <span class="n">Core</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">,</span> <span class="n">FindTarget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/start_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/store_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>

        <span class="c1"># Subscribe to useful topics </span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/filtered&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_odom</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/ekf&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/obstacle&#39;</span><span class="p">,</span> <span class="n">Obstacle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obstacle</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/targets&#39;</span><span class="p">,</span> <span class="n">AprilTagDetectionArray</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span>

        <span class="c1"># Transform listener. Use this to transform between coordinate spaces.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xform</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformListener</span><span class="p">()</span> 

        <span class="c1"># Wait for sensors and tf to have data (this sucks)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span><span class="p">,</span> <span class="s1">&#39;to the world of the future.&#39;</span><span class="p">)</span>

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_odom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">msg</span>
            
    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_obstacle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">msg</span><span class="o">.</span><span class="n">mask</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">|=</span> <span class="n">msg</span><span class="o">.</span><span class="n">msg</span> 

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="k">def</span> <span class="nf">__drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">request</span><span class="o">.</span><span class="n">obstacles</span> <span class="o">=</span> <span class="o">~</span><span class="mi">0</span>
        <span class="k">if</span> <span class="s1">&#39;ignore&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">obstacles</span> <span class="o">=</span> <span class="o">~</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ignore&#39;</span><span class="p">]</span>

        <span class="n">request</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">120</span>
        <span class="k">if</span> <span class="s1">&#39;timeout&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;timeout&#39;</span><span class="p">]</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">([</span><span class="n">request</span><span class="p">])</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">result</span>

        <span class="k">if</span> <span class="s1">&#39;throw&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;throw&#39;</span><span class="p">]</span> <span class="p">:</span> 
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_SONAR</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="n">ObstacleException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_TAG</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">TagException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_HOME</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">HomeException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">PATH_FAIL</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">PathException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">USER_ABORT</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">AbortException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">TIMEOUT</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">value</span>
        
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Stop the rover by placing it in manual mode.&#39;&#39;&#39;</span> 
        <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
        <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Start the rover by placing it into autonomous mode.&#39;&#39;&#39;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
        <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive in a small circle</span>
<span class="sd">        </span>
<span class="sd">        Args:        </span>
<span class="sd">            </span>
<span class="sd">        * See keyword arguments for drive commands </span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">timed_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">angular</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Send the specified velocity command for a given period of time.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * time (float) The duration of the timed command. </span>
<span class="sd">        * linear (float) The linear velocity of the rover (m/s) </span>
<span class="sd">        * angular (float) The angular velocity of the rover (radians/s) </span>

<span class="sd">            SEE: Keyword Arguments for drive commands </span>
<span class="sd">            </span>
<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
            <span class="n">linear</span><span class="o">=</span><span class="n">linear</span><span class="p">,</span> 
            <span class="n">angular</span><span class="o">=</span><span class="n">angular</span><span class="p">,</span> 
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive the specfied distance</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `distance` (`float`) Meters to drive. </span>
<span class="sd">        </span>
<span class="sd">        Keyword arguments:</span>
<span class="sd">    </span>
<span class="sd">        * `ignore` (`int`) - Bitmask with Obstacle messages that will be ignored while driving.         </span>
<span class="sd">        * `throw` (`bool`) - Raise a DriveException if an obstacle is encountered (default True). </span>
<span class="sd">        * `timeout` (`int`) - The command will fail after this number of seconds (defulat: 120)</span>

<span class="sd">        Returns:</span>
<span class="sd">            </span>
<span class="sd">        * If `throw=False` was given returns a `mobility_msgs.msg.MoveResult` containing an integer. \</span>
<span class="sd">         Values are described in `src/mobility/msg/MoveResult.msg`    </span>

<span class="sd">        * If `throw=True` (the default) is given the return value will be converted into an exception. \</span>
<span class="sd">        The following exceptions are defined:</span>
<span class="sd">        </span>
<span class="sd">            * `mobility.swarmie.DriveException` - Base class for driving exceptions. </span>

<span class="sd">            * `mobility.swarmie.VisionException` - Base class for exceptions caused by seeing a tag            </span>

<span class="sd">            * `mobility.swarmie.TagException` - Exception caused when the target tag (0) is seen.</span>

<span class="sd">            * `mobility.swarmie.HomeException` - Exception caused when the home tag (256) is seen. </span>

<span class="sd">            * `mobility.swarmie.ObstacleException` - Exception caused when sonar senses the rover \</span>
<span class="sd">            is close to an obstacle.  </span>

<span class="sd">            * `mobility.swarmie.PathException` - Exception caused when the rover encounters an \</span>
<span class="sd">            error while driving. If the rover detects a large angle between itself and its goal this \</span>
<span class="sd">            happens. It&#39;s usually because the rover has driven over some kind of obstacle.              </span>

<span class="sd">            * `mobility.swarmie.AbortException` - Exception caused when the user places the rover into \</span>
<span class="sd">            manual mode while it was driving. </span>

<span class="sd">            * `mobility.swarmie.TimeoutException` - Exception caused when the drive command fails to \</span>
<span class="sd">            complete in the amount of time specified with the `timeout=` argument. </span>
<span class="sd">             </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">r</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> 
        <span class="p">)</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Turn theta degrees </span>
<span class="sd">        </span>
<span class="sd">        Args: </span>
<span class="sd">        </span>
<span class="sd">        * `theta` (float) Radians to turn </span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> 
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Wait for a period of time. This can be used to check for obstacles</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>

<span class="sd">        * `time` (`float`) seconds to wait. </span>
<span class="sd">            </span>
<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">set_wrist_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set the wrist angle to the specified angle</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `angle` (`float`) Wrist angle in radians. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_finger_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set the finger angle to the spedified angle</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `angle` (`float`) Finger angle in radians.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        
    <span class="k">def</span> <span class="nf">wrist_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Lower the wrist to put it in the pickup position&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">1.25</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">wrist_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Raise the wrist to the top&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">wrist_middle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Put the wrist in the middle of its travel so that the rover can drive with a block&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.75</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fingers_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Open the fingers&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">fingers_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Close the fingers&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">print_state_machine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /rover/state_machine topic.&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print_infoLog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /infoLog topic this is viewable in the GUI&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /rover/status topic this is viewable in the GUI&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">has_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Try to determine if a block is in our grasp. </span>
<span class="sd">        </span>
<span class="sd">        Uses the algorithm: </span>
<span class="sd">        </span>
<span class="sd">        * Raise the wrist all the way up. </span>
<span class="sd">        * Check if the center sonar is blocked at a close distance. If so, return `True`</span>
<span class="sd">        * Check if we can see a block that&#39;s very close. If so, return `True`</span>
<span class="sd">        * Check if this is the simulator. If so, return `True`</span>
<span class="sd">        * Return `False`</span>
<span class="sd">        &#39;&#39;&#39;</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        
        <span class="c1"># First test: is something blocking the center sonar at a short range.</span>
        <span class="n">obstacles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obstacle_condition</span><span class="p">()</span>        
        <span class="k">if</span> <span class="n">obstacles</span> <span class="o">&amp;</span> <span class="n">Obstacle</span><span class="o">.</span><span class="n">SONAR_BLOCK</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># Second test: Can we see a bock that&#39;s close to the camera.</span>
        <span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_targets</span><span class="p">()</span>
        <span class="n">blocks</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">blocks</span><span class="o">.</span><span class="n">detections</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        
        <span class="n">nearest</span> <span class="o">=</span> <span class="n">blocks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x_dist</span> <span class="o">=</span> <span class="n">nearest</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_dist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span> 
            
        <span class="c1"># Third test: The block never seems to affect the sonar in the simulator. </span>
        <span class="c1"># Also, the grasped block rarely seems to be recognized in the simulator. </span>
        <span class="c1"># Which is whack. </span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">())</span>
        
    <span class="k">def</span> <span class="nf">simulator_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&#39;&#39;&#39;Helper Returns True if there is a /gazebo/link_states topic otherwise False&#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_published_topics</span><span class="p">():</span> 
            <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/gazebo/link_states&#39;</span> <span class="p">:</span>
                <span class="c1"># This is the simulator</span>
                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">pickup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Picks up the block&#39;&#39;&#39;</span>
        <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">():</span>
            <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="n">finger_close_angle</span><span class="p">)</span> <span class="c1">#close</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has_block</span><span class="p">())</span>
       
    <span class="k">def</span> <span class="nf">putdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Puts the block down&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">find_nearest_target</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Broken: Return a XXX that is the odom location of the nearest target on the map.&#39;&#39;&#39;</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">get_latest_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Return the latest `apriltags_ros.msg.ArpilTagDetectionArray`. (it might be out of date)&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span>
    
    <span class="k">def</span> <span class="nf">get_obstacle_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the obstacle map.</span>
<span class="sd">            See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_target_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the targets map.</span>
<span class="sd">            See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span><span class="p">())</span>
    
    <span class="k">def</span> <span class="nf">start_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Start calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">store_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Finish calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">get_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` according to Odometery. This location will not </span>
<span class="sd">        jump arround and is locally accurate but will drift over time.&#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span>
    
    <span class="k">def</span> <span class="nf">get_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` that is the output of the EKF that fuses GPS.</span>
<span class="sd">        This value has varying accuracy. The accuracy is reported in a covariance matrix. </span>
<span class="sd">        If you want to wait for a __good__ reading use `mobility.swarmie.Swarmie.wait_for_fix`&#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span>

    <span class="k">def</span> <span class="nf">wait_for_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>    
        <span class="sd">&#39;&#39;&#39;Wait until the GPS fix is reasonably accurate. This could take a while!</span>

<span class="sd">        Arguments: </span>

<span class="sd">        * `distance`: (`float`) The desired accuracty (+/- distance meters) with a likelyhood \</span>
<span class="sd">            of 50%. Defaults to 4 meters.</span>

<span class="sd">        * `time`: (`int`) The number of seconds to wait for a good GPS measurement before giving up. \</span>
<span class="sd">            Defaults to 30 seconds. </span>

<span class="sd">        Returns: </span>

<span class="sd">        * A `mobility.swarmie.Location` if the fix was successful. None if we waited until the timeout. </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">:</span> 
            <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gps_location</span><span class="p">()</span>
            <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">get_variances</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">distance</span> <span class="p">:</span> 
                <span class="k">return</span> <span class="n">loc</span> 
        <span class="k">return</span> <span class="bp">None</span>
    
    <span class="k">def</span> <span class="nf">get_obstacle_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the current obstacle condition. The presence of obstacles is indicated</span>
<span class="sd">        by bits in the returned integer. </span>
<span class="sd">        </span>
<span class="sd">        The definition of the bits can be found in `src/swarmie_msgs/msg/Obstacle.msg`</span>
<span class="sd">        </span>
<span class="sd">        Bit definitions:</span>
<span class="sd">            </span>
<span class="sd">            bit 1: SONAR_LEFT</span>
<span class="sd">            bit 2: SONAR_RIGHT</span>
<span class="sd">            bit 3: SONAR_CENTER</span>
<span class="sd">            bit 4: SONAR_BLOCK</span>
<span class="sd">            bit 8: TAG_TARGET</span>
<span class="sd">            bit 9: TAG_HOME</span>

<span class="sd">        Bit masks:</span>
<span class="sd">        </span>
<span class="sd">            IS_SONAR = SONAR_LEFT | SONAR_CENTER | SONAR_RIGHT | SONAR_BLOCK </span>
<span class="sd">            IS_VISION = TAG_TARGET | TAG_HOME </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span> 
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span>

    <span class="k">def</span> <span class="nf">set_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remember the home GPS location reading. The location can be recalled by other </span>
<span class="sd">        control programs. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * loc: (`mobility.swarmie.Location`) The GPS coordinates to remember. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> 
                        <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                         <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
    
    <span class="k">def</span> <span class="nf">get_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Recall the home GPS location.</span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>

<span class="sd">        * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 

    <span class="k">def</span> <span class="nf">has_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Check to see if the home location parameter is set.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`): True if the parameter exists, False otherwise.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">set_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remember the home odometry location. The location can be recalled by other </span>
<span class="sd">        control programs. Set this every time we see the nest to minimize the effect</span>
<span class="sd">        of drift. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * loc: (`mobility.swarmie.Location`) The coordinates to remember. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> 
                        <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                         <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
    
    <span class="k">def</span> <span class="nf">get_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Recall the home odometry location. This is probably the most reliable memory</span>
<span class="sd">        of the location of the nest. Odometry drifts, so if we haven&#39;t seen home in a </span>
<span class="sd">        while this will be off. </span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>

<span class="sd">        * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 

    <span class="k">def</span> <span class="nf">has_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Check to see if the home odometry location parameter is set.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`): `True` if the parameter exists, `False` otherwise.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">drive_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive directly to a particular point in space. The point must be in </span>
<span class="sd">        the odometry reference frame. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * `place`: (`geometry_msgs.msg.Point`): The place to drive.</span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">            </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> 
                                                 <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">place</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                                            <span class="n">place</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drive</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">set_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Turn to face an absolute heading in radians. (zero is east)</span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * `heading`: (`float`) The heading in radians.</span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">            </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="mobility.swarmie.swarmie_lock" class="name">var <span class="ident">swarmie_lock</span></p>
      
  
  <div class="source_cont">
</div>

      </div>


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="mobility.swarmie.AbortException" class="name">class <span class="ident">AbortException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.AbortException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.AbortException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">AbortException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.AbortException">AbortException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.AbortException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.AbortException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.AbortException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.AbortException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.AbortException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.AbortException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.DriveException" class="name">class <span class="ident">DriveException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.DriveException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.DriveException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">DriveException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.DriveException.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.DriveException.message" class="name">var <span class="ident">message</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.DriveException.status" class="name">var <span class="ident">status</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.DriveException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.DriveException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.DriveException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.HomeException" class="name">class <span class="ident">HomeException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.HomeException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.HomeException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">HomeException</span><span class="p">(</span><span class="n">VisionException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.HomeException">HomeException</a></li>
          <li><a href="#mobility.swarmie.VisionException">VisionException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.HomeException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.HomeException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.HomeException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.HomeException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.HomeException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.HomeException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.Location" class="name">class <span class="ident">Location</span></p>
      
  
    <div class="desc"><p>A class that encodes an EKF provided location and accessor methods</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Location" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">Location</span><span class="p">:</span> 
    <span class="sd">&#39;&#39;&#39;A class that encodes an EKF provided location and accessor methods&#39;&#39;&#39;</span> 

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">odo</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">odo</span> 
    
    <span class="k">def</span> <span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a std_msgs.Pose from this Location. Useful because Pose </span>
<span class="sd">        has angles represented as roll, pitch, yaw.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`std_msgs.msg.Pose`) The pose. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">quat</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> 
                <span class="p">]</span>        
        <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">euler_from_quaternion</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span>
        <span class="n">pose</span> <span class="o">=</span> <span class="n">Pose2D</span><span class="p">()</span>
        <span class="n">pose</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
        <span class="n">pose</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> 
        <span class="n">pose</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">y</span> 
        <span class="k">return</span> <span class="n">pose</span>

    <span class="k">def</span> <span class="nf">at_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Determine if the pose is within acceptable distance of this location</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`) True if within the target distance.</span>

<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">goal</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                          <span class="n">goal</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">distance</span>

    <span class="k">def</span> <span class="nf">get_variances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return the X, Y and Z variances from the covariance matrix of this location. </span>
<span class="sd">        Variance is defined as the expectation of the squared deviation of a random </span>
<span class="sd">        variable from its mean. </span>
<span class="sd">        </span>
<span class="sd">        https://en.wikipedia.org/wiki/Variance</span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>
<span class="sd">        </span>
<span class="sd">        * (`tuple`): `(vX, vY, vZ)`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">covariance</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.Location">Location</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.Location.Odometry" class="name">var <span class="ident">Odometry</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Location.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, odo)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Location.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Location.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">odo</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">odo</span> 
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Location.at_goal">
    <p>def <span class="ident">at_goal</span>(</p><p>self, goal, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Determine if the pose is within acceptable distance of this location</p>
<p>Returns:</p>
<ul>
<li>(<code>bool</code>) True if within the target distance.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Location.at_goal', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Location.at_goal" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">at_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Determine if the pose is within acceptable distance of this location</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    </span>
<span class="sd">    * (`bool`) True if within the target distance.</span>
<span class="sd">    &#39;&#39;&#39;</span> 
    <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">goal</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                      <span class="n">goal</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">distance</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Location.get_pose">
    <p>def <span class="ident">get_pose</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a std_msgs.Pose from this Location. Useful because Pose 
has angles represented as roll, pitch, yaw.</p>
<p>Returns:</p>
<ul>
<li>(<code>std_msgs.msg.Pose</code>) The pose.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Location.get_pose', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Location.get_pose" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return a std_msgs.Pose from this Location. Useful because Pose </span>
<span class="sd">    has angles represented as roll, pitch, yaw.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    </span>
<span class="sd">    * (`std_msgs.msg.Pose`) The pose. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">quat</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> 
            <span class="p">]</span>        
    <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">euler_from_quaternion</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span>
    <span class="n">pose</span> <span class="o">=</span> <span class="n">Pose2D</span><span class="p">()</span>
    <span class="n">pose</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
    <span class="n">pose</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> 
    <span class="n">pose</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">y</span> 
    <span class="k">return</span> <span class="n">pose</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Location.get_variances">
    <p>def <span class="ident">get_variances</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the X, Y and Z variances from the covariance matrix of this location. 
Variance is defined as the expectation of the squared deviation of a random 
variable from its mean. </p>
<p>https://en.wikipedia.org/wiki/Variance</p>
<p>Returns: </p>
<ul>
<li>(<code>tuple</code>): <code>(vX, vY, vZ)</code></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Location.get_variances', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Location.get_variances" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_variances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return the X, Y and Z variances from the covariance matrix of this location. </span>
<span class="sd">    Variance is defined as the expectation of the squared deviation of a random </span>
<span class="sd">    variable from its mean. </span>
<span class="sd">    </span>
<span class="sd">    https://en.wikipedia.org/wiki/Variance</span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">    </span>
<span class="sd">    * (`tuple`): `(vX, vY, vZ)`</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">covariance</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.ObstacleException" class="name">class <span class="ident">ObstacleException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.ObstacleException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.ObstacleException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">ObstacleException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span> 
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.ObstacleException">ObstacleException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.ObstacleException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.ObstacleException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.ObstacleException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.ObstacleException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.ObstacleException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.ObstacleException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.PathException" class="name">class <span class="ident">PathException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.PathException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.PathException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">PathException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.PathException">PathException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.PathException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.PathException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.PathException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.PathException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.PathException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.PathException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.Swarmie" class="name">class <span class="ident">Swarmie</span></p>
      
  
    <div class="desc"><p>Class that embodies the Swarmie's API</p>
<p>This is the Python API used to drive the rover. The API interfaces 
with ROS topics and services to perform action and acquire sensor data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">Swarmie</span><span class="p">:</span> 
    <span class="sd">&#39;&#39;&#39;Class that embodies the Swarmie&#39;s API</span>
<span class="sd">    </span>
<span class="sd">    This is the Python API used to drive the rover. The API interfaces </span>
<span class="sd">    with ROS topics and services to perform action and acquire sensor data. </span>
<span class="sd">    &#39;&#39;&#39;</span> 
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rover</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Constructor.</span>

<span class="sd">        Args:</span>

<span class="sd">        * `rover` (`string`) - Name of the rover.</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">        * `node_suffix` (`string`) - Optional argument to start up this node</span>
<span class="sd">        without killing the main /rover_CONTROLLER node. Used by teleop_keyboard</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">=</span> <span class="n">rover</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span> <span class="o">=</span> <span class="n">AprilTagDetectionArray</span><span class="p">()</span>
        
        <span class="c1"># Intialize this ROS node.</span>
        <span class="k">if</span> <span class="s1">&#39;node_suffix&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">]:</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span><span class="p">)</span>

        <span class="c1"># Create publishiers. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/state_machine&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/status&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/infoLog&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/mode&#39;</span><span class="p">,</span> <span class="n">UInt8</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/fingerAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/wristAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c1"># Wait for necessary services to be online. </span>
        <span class="c1"># Services are APIs calls to other neodes. </span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">)</span>

        <span class="c1"># Numpy-ify the GridMap </span>
        <span class="n">GetMap</span><span class="o">.</span><span class="n">_response_class</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">numpy_msg</span><span class="o">.</span><span class="n">numpy_msg</span><span class="p">(</span><span class="n">GridMap</span><span class="p">)</span>
        
        <span class="c1"># Connect to services.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">,</span> <span class="n">Core</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">,</span> <span class="n">FindTarget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/start_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/store_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>

        <span class="c1"># Subscribe to useful topics </span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/filtered&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_odom</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/ekf&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/obstacle&#39;</span><span class="p">,</span> <span class="n">Obstacle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obstacle</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/targets&#39;</span><span class="p">,</span> <span class="n">AprilTagDetectionArray</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span>

        <span class="c1"># Transform listener. Use this to transform between coordinate spaces.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xform</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformListener</span><span class="p">()</span> 

        <span class="c1"># Wait for sensors and tf to have data (this sucks)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span><span class="p">,</span> <span class="s1">&#39;to the world of the future.&#39;</span><span class="p">)</span>

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_odom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">msg</span>
            
    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span><span class="o">.</span><span class="n">Odometry</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_obstacle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">msg</span><span class="o">.</span><span class="n">mask</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">|=</span> <span class="n">msg</span><span class="o">.</span><span class="n">msg</span> 

    <span class="nd">@sync</span><span class="p">(</span><span class="n">swarmie_lock</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="k">def</span> <span class="nf">__drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">request</span><span class="o">.</span><span class="n">obstacles</span> <span class="o">=</span> <span class="o">~</span><span class="mi">0</span>
        <span class="k">if</span> <span class="s1">&#39;ignore&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">obstacles</span> <span class="o">=</span> <span class="o">~</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ignore&#39;</span><span class="p">]</span>

        <span class="n">request</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">120</span>
        <span class="k">if</span> <span class="s1">&#39;timeout&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;timeout&#39;</span><span class="p">]</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">([</span><span class="n">request</span><span class="p">])</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">result</span>

        <span class="k">if</span> <span class="s1">&#39;throw&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;throw&#39;</span><span class="p">]</span> <span class="p">:</span> 
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_SONAR</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="n">ObstacleException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_TAG</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">TagException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">OBSTACLE_HOME</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">HomeException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">PATH_FAIL</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">PathException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">USER_ABORT</span> <span class="p">:</span> 
                <span class="k">raise</span> <span class="n">AbortException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">MoveResult</span><span class="o">.</span><span class="n">TIMEOUT</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">value</span>
        
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Stop the rover by placing it in manual mode.&#39;&#39;&#39;</span> 
        <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
        <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Start the rover by placing it into autonomous mode.&#39;&#39;&#39;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
        <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive in a small circle</span>
<span class="sd">        </span>
<span class="sd">        Args:        </span>
<span class="sd">            </span>
<span class="sd">        * See keyword arguments for drive commands </span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">timed_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">angular</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Send the specified velocity command for a given period of time.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * time (float) The duration of the timed command. </span>
<span class="sd">        * linear (float) The linear velocity of the rover (m/s) </span>
<span class="sd">        * angular (float) The angular velocity of the rover (radians/s) </span>

<span class="sd">            SEE: Keyword Arguments for drive commands </span>
<span class="sd">            </span>
<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
            <span class="n">linear</span><span class="o">=</span><span class="n">linear</span><span class="p">,</span> 
            <span class="n">angular</span><span class="o">=</span><span class="n">angular</span><span class="p">,</span> 
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive the specfied distance</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `distance` (`float`) Meters to drive. </span>
<span class="sd">        </span>
<span class="sd">        Keyword arguments:</span>
<span class="sd">    </span>
<span class="sd">        * `ignore` (`int`) - Bitmask with Obstacle messages that will be ignored while driving.         </span>
<span class="sd">        * `throw` (`bool`) - Raise a DriveException if an obstacle is encountered (default True). </span>
<span class="sd">        * `timeout` (`int`) - The command will fail after this number of seconds (defulat: 120)</span>

<span class="sd">        Returns:</span>
<span class="sd">            </span>
<span class="sd">        * If `throw=False` was given returns a `mobility_msgs.msg.MoveResult` containing an integer. \</span>
<span class="sd">         Values are described in `src/mobility/msg/MoveResult.msg`    </span>

<span class="sd">        * If `throw=True` (the default) is given the return value will be converted into an exception. \</span>
<span class="sd">        The following exceptions are defined:</span>
<span class="sd">        </span>
<span class="sd">            * `mobility.swarmie.DriveException` - Base class for driving exceptions. </span>

<span class="sd">            * `mobility.swarmie.VisionException` - Base class for exceptions caused by seeing a tag            </span>

<span class="sd">            * `mobility.swarmie.TagException` - Exception caused when the target tag (0) is seen.</span>

<span class="sd">            * `mobility.swarmie.HomeException` - Exception caused when the home tag (256) is seen. </span>

<span class="sd">            * `mobility.swarmie.ObstacleException` - Exception caused when sonar senses the rover \</span>
<span class="sd">            is close to an obstacle.  </span>

<span class="sd">            * `mobility.swarmie.PathException` - Exception caused when the rover encounters an \</span>
<span class="sd">            error while driving. If the rover detects a large angle between itself and its goal this \</span>
<span class="sd">            happens. It&#39;s usually because the rover has driven over some kind of obstacle.              </span>

<span class="sd">            * `mobility.swarmie.AbortException` - Exception caused when the user places the rover into \</span>
<span class="sd">            manual mode while it was driving. </span>

<span class="sd">            * `mobility.swarmie.TimeoutException` - Exception caused when the drive command fails to \</span>
<span class="sd">            complete in the amount of time specified with the `timeout=` argument. </span>
<span class="sd">             </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">r</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> 
        <span class="p">)</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Turn theta degrees </span>
<span class="sd">        </span>
<span class="sd">        Args: </span>
<span class="sd">        </span>
<span class="sd">        * `theta` (float) Radians to turn </span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> 
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Wait for a period of time. This can be used to check for obstacles</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>

<span class="sd">        * `time` (`float`) seconds to wait. </span>
<span class="sd">            </span>
<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
            <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">set_wrist_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set the wrist angle to the specified angle</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `angle` (`float`) Wrist angle in radians. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_finger_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set the finger angle to the spedified angle</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        </span>
<span class="sd">        * `angle` (`float`) Finger angle in radians.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        
    <span class="k">def</span> <span class="nf">wrist_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Lower the wrist to put it in the pickup position&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">1.25</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">wrist_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Raise the wrist to the top&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">wrist_middle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Put the wrist in the middle of its travel so that the rover can drive with a block&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.75</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fingers_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Open the fingers&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">fingers_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Close the fingers&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">print_state_machine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /rover/state_machine topic.&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print_infoLog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /infoLog topic this is viewable in the GUI&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Print a message to the /rover/status topic this is viewable in the GUI&#39;&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">has_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Try to determine if a block is in our grasp. </span>
<span class="sd">        </span>
<span class="sd">        Uses the algorithm: </span>
<span class="sd">        </span>
<span class="sd">        * Raise the wrist all the way up. </span>
<span class="sd">        * Check if the center sonar is blocked at a close distance. If so, return `True`</span>
<span class="sd">        * Check if we can see a block that&#39;s very close. If so, return `True`</span>
<span class="sd">        * Check if this is the simulator. If so, return `True`</span>
<span class="sd">        * Return `False`</span>
<span class="sd">        &#39;&#39;&#39;</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        
        <span class="c1"># First test: is something blocking the center sonar at a short range.</span>
        <span class="n">obstacles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obstacle_condition</span><span class="p">()</span>        
        <span class="k">if</span> <span class="n">obstacles</span> <span class="o">&amp;</span> <span class="n">Obstacle</span><span class="o">.</span><span class="n">SONAR_BLOCK</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># Second test: Can we see a bock that&#39;s close to the camera.</span>
        <span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_targets</span><span class="p">()</span>
        <span class="n">blocks</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">blocks</span><span class="o">.</span><span class="n">detections</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        
        <span class="n">nearest</span> <span class="o">=</span> <span class="n">blocks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x_dist</span> <span class="o">=</span> <span class="n">nearest</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_dist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span> 
            
        <span class="c1"># Third test: The block never seems to affect the sonar in the simulator. </span>
        <span class="c1"># Also, the grasped block rarely seems to be recognized in the simulator. </span>
        <span class="c1"># Which is whack. </span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">())</span>
        
    <span class="k">def</span> <span class="nf">simulator_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&#39;&#39;&#39;Helper Returns True if there is a /gazebo/link_states topic otherwise False&#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_published_topics</span><span class="p">():</span> 
            <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/gazebo/link_states&#39;</span> <span class="p">:</span>
                <span class="c1"># This is the simulator</span>
                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">pickup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Picks up the block&#39;&#39;&#39;</span>
        <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">():</span>
            <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="n">finger_close_angle</span><span class="p">)</span> <span class="c1">#close</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has_block</span><span class="p">())</span>
       
    <span class="k">def</span> <span class="nf">putdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Puts the block down&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">find_nearest_target</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Broken: Return a XXX that is the odom location of the nearest target on the map.&#39;&#39;&#39;</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">get_latest_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Return the latest `apriltags_ros.msg.ArpilTagDetectionArray`. (it might be out of date)&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span>
    
    <span class="k">def</span> <span class="nf">get_obstacle_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the obstacle map.</span>
<span class="sd">            See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_target_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the targets map.</span>
<span class="sd">            See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span><span class="p">())</span>
    
    <span class="k">def</span> <span class="nf">start_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Start calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">store_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Finish calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">get_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` according to Odometery. This location will not </span>
<span class="sd">        jump arround and is locally accurate but will drift over time.&#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span>
    
    <span class="k">def</span> <span class="nf">get_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` that is the output of the EKF that fuses GPS.</span>
<span class="sd">        This value has varying accuracy. The accuracy is reported in a covariance matrix. </span>
<span class="sd">        If you want to wait for a __good__ reading use `mobility.swarmie.Swarmie.wait_for_fix`&#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span>

    <span class="k">def</span> <span class="nf">wait_for_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>    
        <span class="sd">&#39;&#39;&#39;Wait until the GPS fix is reasonably accurate. This could take a while!</span>

<span class="sd">        Arguments: </span>

<span class="sd">        * `distance`: (`float`) The desired accuracty (+/- distance meters) with a likelyhood \</span>
<span class="sd">            of 50%. Defaults to 4 meters.</span>

<span class="sd">        * `time`: (`int`) The number of seconds to wait for a good GPS measurement before giving up. \</span>
<span class="sd">            Defaults to 30 seconds. </span>

<span class="sd">        Returns: </span>

<span class="sd">        * A `mobility.swarmie.Location` if the fix was successful. None if we waited until the timeout. </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">:</span> 
            <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gps_location</span><span class="p">()</span>
            <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">get_variances</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">distance</span> <span class="p">:</span> 
                <span class="k">return</span> <span class="n">loc</span> 
        <span class="k">return</span> <span class="bp">None</span>
    
    <span class="k">def</span> <span class="nf">get_obstacle_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the current obstacle condition. The presence of obstacles is indicated</span>
<span class="sd">        by bits in the returned integer. </span>
<span class="sd">        </span>
<span class="sd">        The definition of the bits can be found in `src/swarmie_msgs/msg/Obstacle.msg`</span>
<span class="sd">        </span>
<span class="sd">        Bit definitions:</span>
<span class="sd">            </span>
<span class="sd">            bit 1: SONAR_LEFT</span>
<span class="sd">            bit 2: SONAR_RIGHT</span>
<span class="sd">            bit 3: SONAR_CENTER</span>
<span class="sd">            bit 4: SONAR_BLOCK</span>
<span class="sd">            bit 8: TAG_TARGET</span>
<span class="sd">            bit 9: TAG_HOME</span>

<span class="sd">        Bit masks:</span>
<span class="sd">        </span>
<span class="sd">            IS_SONAR = SONAR_LEFT | SONAR_CENTER | SONAR_RIGHT | SONAR_BLOCK </span>
<span class="sd">            IS_VISION = TAG_TARGET | TAG_HOME </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span> 
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span>

    <span class="k">def</span> <span class="nf">set_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remember the home GPS location reading. The location can be recalled by other </span>
<span class="sd">        control programs. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * loc: (`mobility.swarmie.Location`) The GPS coordinates to remember. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> 
                        <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                         <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
    
    <span class="k">def</span> <span class="nf">get_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Recall the home GPS location.</span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>

<span class="sd">        * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 

    <span class="k">def</span> <span class="nf">has_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Check to see if the home location parameter is set.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`): True if the parameter exists, False otherwise.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">set_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remember the home odometry location. The location can be recalled by other </span>
<span class="sd">        control programs. Set this every time we see the nest to minimize the effect</span>
<span class="sd">        of drift. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * loc: (`mobility.swarmie.Location`) The coordinates to remember. </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> 
                        <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                         <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
    
    <span class="k">def</span> <span class="nf">get_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Recall the home odometry location. This is probably the most reliable memory</span>
<span class="sd">        of the location of the nest. Odometry drifts, so if we haven&#39;t seen home in a </span>
<span class="sd">        while this will be off. </span>
<span class="sd">        </span>
<span class="sd">        Returns: </span>

<span class="sd">        * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 

    <span class="k">def</span> <span class="nf">has_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Check to see if the home odometry location parameter is set.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        </span>
<span class="sd">        * (`bool`): `True` if the parameter exists, `False` otherwise.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">drive_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Drive directly to a particular point in space. The point must be in </span>
<span class="sd">        the odometry reference frame. </span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * `place`: (`geometry_msgs.msg.Point`): The place to drive.</span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">            </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> 
                                                 <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">place</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                                            <span class="n">place</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drive</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">set_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Turn to face an absolute heading in radians. (zero is east)</span>
<span class="sd">        </span>
<span class="sd">        Arguments:</span>
<span class="sd">        </span>
<span class="sd">        * `heading`: (`float`) The heading in radians.</span>

<span class="sd">        Keyword Arguments/Returns/Raises:</span>
<span class="sd">        </span>
<span class="sd">        * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">            </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.Swarmie">Swarmie</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.MapLocation" class="name">var <span class="ident">MapLocation</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.Obstacles" class="name">var <span class="ident">Obstacles</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.OdomLocation" class="name">var <span class="ident">OdomLocation</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.Targets" class="name">var <span class="ident">Targets</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.control" class="name">var <span class="ident">control</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.finger_publisher" class="name">var <span class="ident">finger_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.info_publisher" class="name">var <span class="ident">info_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.mode_publisher" class="name">var <span class="ident">mode_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.rover_name" class="name">var <span class="ident">rover_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.sm_publisher" class="name">var <span class="ident">sm_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.status_publisher" class="name">var <span class="ident">status_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.wrist_publisher" class="name">var <span class="ident">wrist_publisher</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.Swarmie.xform" class="name">var <span class="ident">xform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, rover, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Constructor.</p>
<p>Args:</p>
<ul>
<li><code>rover</code> (<code>string</code>) - Name of the rover.</li>
</ul>
<p>Keyword arguments:</p>
<ul>
<li><code>node_suffix</code> (<code>string</code>) - Optional argument to start up this node
without killing the main /rover_CONTROLLER node. Used by teleop_keyboard</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rover</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Constructor.</span>
<span class="sd">    Args:</span>
<span class="sd">    * `rover` (`string`) - Name of the rover.</span>
<span class="sd">    Keyword arguments:</span>
<span class="sd">    * `node_suffix` (`string`) - Optional argument to start up this node</span>
<span class="sd">    without killing the main /rover_CONTROLLER node. Used by teleop_keyboard</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">=</span> <span class="n">rover</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span> <span class="o">=</span> <span class="n">AprilTagDetectionArray</span><span class="p">()</span>
    
    <span class="c1"># Intialize this ROS node.</span>
    <span class="k">if</span> <span class="s1">&#39;node_suffix&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">]:</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;node_suffix&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;_CONTROLLER&#39;</span><span class="p">)</span>
    <span class="c1"># Create publishiers. </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/state_machine&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/status&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/infoLog&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/mode&#39;</span><span class="p">,</span> <span class="n">UInt8</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/fingerAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/wristAngle/cmd&#39;</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">latch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1"># Wait for necessary services to be online. </span>
    <span class="c1"># Services are APIs calls to other neodes. </span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">)</span>
    <span class="c1"># Numpy-ify the GridMap </span>
    <span class="n">GetMap</span><span class="o">.</span><span class="n">_response_class</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">numpy_msg</span><span class="o">.</span><span class="n">numpy_msg</span><span class="p">(</span><span class="n">GridMap</span><span class="p">)</span>
    
    <span class="c1"># Connect to services.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/control&#39;</span><span class="p">,</span> <span class="n">Core</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/find_nearest_target&#39;</span><span class="p">,</span> <span class="n">FindTarget</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_obstacle_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/map/get_target_map&#39;</span><span class="p">,</span> <span class="n">GetMap</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/start_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/store_magnetometer_calibration&#39;</span><span class="p">,</span> <span class="n">Empty</span><span class="p">)</span>
    <span class="c1"># Subscribe to useful topics </span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/filtered&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_odom</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/odom/ekf&#39;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/obstacle&#39;</span><span class="p">,</span> <span class="n">Obstacle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obstacle</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">rover</span> <span class="o">+</span> <span class="s1">&#39;/targets&#39;</span><span class="p">,</span> <span class="n">AprilTagDetectionArray</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span>
    <span class="c1"># Transform listener. Use this to transform between coordinate spaces.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xform</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformListener</span><span class="p">()</span> 
    <span class="c1"># Wait for sensors and tf to have data (this sucks)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="k">print</span> <span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span><span class="p">,</span> <span class="s1">&#39;to the world of the future.&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.circle">
    <p>def <span class="ident">circle</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Drive in a small circle</p>
<p>Args:        </p>
<ul>
<li>See keyword arguments for drive commands </li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.circle', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.circle" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Drive in a small circle</span>
<span class="sd">    </span>
<span class="sd">    Args:        </span>
<span class="sd">        </span>
<span class="sd">    * See keyword arguments for drive commands </span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">    &#39;&#39;&#39;</span> 
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timed_drive</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.62</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.drive">
    <p>def <span class="ident">drive</span>(</p><p>self, distance, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Drive the specfied distance</p>
<p>Args:</p>
<ul>
<li><code>distance</code> (<code>float</code>) Meters to drive. </li>
</ul>
<p>Keyword arguments:</p>
<ul>
<li><code>ignore</code> (<code>int</code>) - Bitmask with Obstacle messages that will be ignored while driving.         </li>
<li><code>throw</code> (<code>bool</code>) - Raise a DriveException if an obstacle is encountered (default True). </li>
<li><code>timeout</code> (<code>int</code>) - The command will fail after this number of seconds (defulat: 120)</li>
</ul>
<p>Returns:</p>
<ul>
<li>
<p>If <code>throw=False</code> was given returns a <code>mobility_msgs.msg.MoveResult</code> containing an integer.          Values are described in <code>src/mobility/msg/MoveResult.msg</code>    </p>
</li>
<li>
<p>If <code>throw=True</code> (the default) is given the return value will be converted into an exception.         The following exceptions are defined:</p>
<ul>
<li>
<p><a href="#mobility.swarmie.DriveException"><code>DriveException</code></a> - Base class for driving exceptions. </p>
</li>
<li>
<p><a href="#mobility.swarmie.VisionException"><code>VisionException</code></a> - Base class for exceptions caused by seeing a tag            </p>
</li>
<li>
<p><a href="#mobility.swarmie.TagException"><code>TagException</code></a> - Exception caused when the target tag (0) is seen.</p>
</li>
<li>
<p><a href="#mobility.swarmie.HomeException"><code>HomeException</code></a> - Exception caused when the home tag (256) is seen. </p>
</li>
<li>
<p><a href="#mobility.swarmie.ObstacleException"><code>ObstacleException</code></a> - Exception caused when sonar senses the rover             is close to an obstacle.  </p>
</li>
<li>
<p><a href="#mobility.swarmie.PathException"><code>PathException</code></a> - Exception caused when the rover encounters an             error while driving. If the rover detects a large angle between itself and its goal this             happens. It's usually because the rover has driven over some kind of obstacle.              </p>
</li>
<li>
<p><a href="#mobility.swarmie.AbortException"><code>AbortException</code></a> - Exception caused when the user places the rover into             manual mode while it was driving. </p>
</li>
<li>
<p><a href="#mobility.swarmie.TimeoutException"><code>TimeoutException</code></a> - Exception caused when the drive command fails to             complete in the amount of time specified with the <code>timeout=</code> argument.</p>
</li>
</ul>
</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.drive', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.drive" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Drive the specfied distance</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    </span>
<span class="sd">    * `distance` (`float`) Meters to drive. </span>
<span class="sd">    </span>
<span class="sd">    Keyword arguments:</span>

<span class="sd">    * `ignore` (`int`) - Bitmask with Obstacle messages that will be ignored while driving.         </span>
<span class="sd">    * `throw` (`bool`) - Raise a DriveException if an obstacle is encountered (default True). </span>
<span class="sd">    * `timeout` (`int`) - The command will fail after this number of seconds (defulat: 120)</span>
<span class="sd">    Returns:</span>
<span class="sd">        </span>
<span class="sd">    * If `throw=False` was given returns a `mobility_msgs.msg.MoveResult` containing an integer. \</span>
<span class="sd">     Values are described in `src/mobility/msg/MoveResult.msg`    </span>
<span class="sd">    * If `throw=True` (the default) is given the return value will be converted into an exception. \</span>
<span class="sd">    The following exceptions are defined:</span>
<span class="sd">    </span>
<span class="sd">        * `mobility.swarmie.DriveException` - Base class for driving exceptions. </span>
<span class="sd">        * `mobility.swarmie.VisionException` - Base class for exceptions caused by seeing a tag            </span>
<span class="sd">        * `mobility.swarmie.TagException` - Exception caused when the target tag (0) is seen.</span>
<span class="sd">        * `mobility.swarmie.HomeException` - Exception caused when the home tag (256) is seen. </span>
<span class="sd">        * `mobility.swarmie.ObstacleException` - Exception caused when sonar senses the rover \</span>
<span class="sd">        is close to an obstacle.  </span>
<span class="sd">        * `mobility.swarmie.PathException` - Exception caused when the rover encounters an \</span>
<span class="sd">        error while driving. If the rover detects a large angle between itself and its goal this \</span>
<span class="sd">        happens. It&#39;s usually because the rover has driven over some kind of obstacle.              </span>
<span class="sd">        * `mobility.swarmie.AbortException` - Exception caused when the user places the rover into \</span>
<span class="sd">        manual mode while it was driving. </span>
<span class="sd">        * `mobility.swarmie.TimeoutException` - Exception caused when the drive command fails to \</span>
<span class="sd">        complete in the amount of time specified with the `timeout=` argument. </span>
<span class="sd">         </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
        <span class="n">r</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> 
    <span class="p">)</span>        
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.drive_to">
    <p>def <span class="ident">drive_to</span>(</p><p>self, place, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Drive directly to a particular point in space. The point must be in 
the odometry reference frame. </p>
<p>Arguments:</p>
<ul>
<li><code>place</code>: (<code>geometry_msgs.msg.Point</code>): The place to drive.</li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.drive_to', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.drive_to" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">drive_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Drive directly to a particular point in space. The point must be in </span>
<span class="sd">    the odometry reference frame. </span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">    </span>
<span class="sd">    * `place`: (`geometry_msgs.msg.Point`): The place to drive.</span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">place</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> 
                                             <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">place</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                                        <span class="n">place</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">drive</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.find_nearest_target">
    <p>def <span class="ident">find_nearest_target</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Broken: Return a XXX that is the odom location of the nearest target on the map.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.find_nearest_target', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.find_nearest_target" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">find_nearest_target</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;Broken: Return a XXX that is the odom location of the nearest target on the map.&#39;&#39;&#39;</span> 
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest_target</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.fingers_close">
    <p>def <span class="ident">fingers_close</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Close the fingers</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.fingers_close', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.fingers_close" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">fingers_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Close the fingers&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.fingers_open">
    <p>def <span class="ident">fingers_open</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Open the fingers</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.fingers_open', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.fingers_open" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">fingers_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Open the fingers&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_gps_location">
    <p>def <span class="ident">get_gps_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a <a href="#mobility.swarmie.Location"><code>Location</code></a> that is the output of the EKF that fuses GPS.
This value has varying accuracy. The accuracy is reported in a covariance matrix. 
If you want to wait for a <strong>good</strong> reading use <a href="#mobility.swarmie.Swarmie.wait_for_fix"><code>wait_for_fix</code></a></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_gps_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_gps_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` that is the output of the EKF that fuses GPS.</span>
<span class="sd">    This value has varying accuracy. The accuracy is reported in a covariance matrix. </span>
<span class="sd">    If you want to wait for a __good__ reading use `mobility.swarmie.Swarmie.wait_for_fix`&#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">MapLocation</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_home_gps_location">
    <p>def <span class="ident">get_home_gps_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Recall the home GPS location.</p>
<p>Returns: </p>
<ul>
<li>(<code>geometry_msgs.msg.Point</code>) : The location of home.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_home_gps_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_home_gps_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Recall the home GPS location.</span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">    * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_home_odom_location">
    <p>def <span class="ident">get_home_odom_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Recall the home odometry location. This is probably the most reliable memory
of the location of the nest. Odometry drifts, so if we haven't seen home in a 
while this will be off. </p>
<p>Returns: </p>
<ul>
<li>(<code>geometry_msgs.msg.Point</code>) : The location of home.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_home_odom_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_home_odom_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Recall the home odometry location. This is probably the most reliable memory</span>
<span class="sd">    of the location of the nest. Odometry drifts, so if we haven&#39;t seen home in a </span>
<span class="sd">    while this will be off. </span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">    * (`geometry_msgs.msg.Point`) : The location of home.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="o">**</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}))</span> 
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_latest_targets">
    <p>def <span class="ident">get_latest_targets</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the latest <code>apriltags_ros.msg.ArpilTagDetectionArray</code>. (it might be out of date)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_latest_targets', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_latest_targets" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_latest_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;Return the latest `apriltags_ros.msg.ArpilTagDetectionArray`. (it might be out of date)&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Targets</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_obstacle_condition">
    <p>def <span class="ident">get_obstacle_condition</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the current obstacle condition. The presence of obstacles is indicated
by bits in the returned integer. </p>
<p>The definition of the bits can be found in <code>src/swarmie_msgs/msg/Obstacle.msg</code></p>
<p>Bit definitions:</p>
<div class="codehilite"><pre>bit 1: SONAR_LEFT
bit 2: SONAR_RIGHT
bit 3: SONAR_CENTER
bit 4: SONAR_BLOCK
bit 8: TAG_TARGET
bit 9: TAG_HOME
</pre></div>


<p>Bit masks:</p>
<div class="codehilite"><pre>IS_SONAR = SONAR_LEFT | SONAR_CENTER | SONAR_RIGHT | SONAR_BLOCK 
IS_VISION = TAG_TARGET | TAG_HOME
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_obstacle_condition', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_obstacle_condition" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_obstacle_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns the current obstacle condition. The presence of obstacles is indicated</span>
<span class="sd">    by bits in the returned integer. </span>
<span class="sd">    </span>
<span class="sd">    The definition of the bits can be found in `src/swarmie_msgs/msg/Obstacle.msg`</span>
<span class="sd">    </span>
<span class="sd">    Bit definitions:</span>
<span class="sd">        </span>
<span class="sd">        bit 1: SONAR_LEFT</span>
<span class="sd">        bit 2: SONAR_RIGHT</span>
<span class="sd">        bit 3: SONAR_CENTER</span>
<span class="sd">        bit 4: SONAR_BLOCK</span>
<span class="sd">        bit 8: TAG_TARGET</span>
<span class="sd">        bit 9: TAG_HOME</span>
<span class="sd">    Bit masks:</span>
<span class="sd">    </span>
<span class="sd">        IS_SONAR = SONAR_LEFT | SONAR_CENTER | SONAR_RIGHT | SONAR_BLOCK </span>
<span class="sd">        IS_VISION = TAG_TARGET | TAG_HOME </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span> 
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Obstacles</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_obstacle_map">
    <p>def <span class="ident">get_obstacle_map</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <code>mapping.msg.RoverMap</code> that is the obstacle map.
See <code>./src/mapping/src/mapping/__init__.py</code> for documentation of RoverMap</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_obstacle_map', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_obstacle_map" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_obstacle_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the obstacle map.</span>
<span class="sd">        See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_obstacle_map</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_odom_location">
    <p>def <span class="ident">get_odom_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a <a href="#mobility.swarmie.Location"><code>Location</code></a> according to Odometery. This location will not 
jump arround and is locally accurate but will drift over time.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_odom_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_odom_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns a `mobility.swarmie.Location` according to Odometery. This location will not </span>
<span class="sd">    jump arround and is locally accurate but will drift over time.&#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="n">swarmie_lock</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OdomLocation</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.get_target_map">
    <p>def <span class="ident">get_target_map</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <code>mapping.msg.RoverMap</code> that is the targets map.
See <code>./src/mapping/src/mapping/__init__.py</code> for documentation of RoverMap</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.get_target_map', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.get_target_map" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">get_target_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return a `mapping.msg.RoverMap` that is the targets map.</span>
<span class="sd">        See `./src/mapping/src/mapping/__init__.py` for documentation of RoverMap&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">RoverMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_target_map</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.go">
    <p>def <span class="ident">go</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Start the rover by placing it into autonomous mode.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.go', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.go" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Start the rover by placing it into autonomous mode.&#39;&#39;&#39;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
    <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.has_block">
    <p>def <span class="ident">has_block</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to determine if a block is in our grasp. </p>
<p>Uses the algorithm: </p>
<ul>
<li>Raise the wrist all the way up. </li>
<li>Check if the center sonar is blocked at a close distance. If so, return <code>True</code></li>
<li>Check if we can see a block that's very close. If so, return <code>True</code></li>
<li>Check if this is the simulator. If so, return <code>True</code></li>
<li>Return <code>False</code></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.has_block', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.has_block" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">has_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Try to determine if a block is in our grasp. </span>
<span class="sd">    </span>
<span class="sd">    Uses the algorithm: </span>
<span class="sd">    </span>
<span class="sd">    * Raise the wrist all the way up. </span>
<span class="sd">    * Check if the center sonar is blocked at a close distance. If so, return `True`</span>
<span class="sd">    * Check if we can see a block that&#39;s very close. If so, return `True`</span>
<span class="sd">    * Check if this is the simulator. If so, return `True`</span>
<span class="sd">    * Return `False`</span>
<span class="sd">    &#39;&#39;&#39;</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="c1"># First test: is something blocking the center sonar at a short range.</span>
    <span class="n">obstacles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obstacle_condition</span><span class="p">()</span>        
    <span class="k">if</span> <span class="n">obstacles</span> <span class="o">&amp;</span> <span class="n">Obstacle</span><span class="o">.</span><span class="n">SONAR_BLOCK</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Second test: Can we see a bock that&#39;s close to the camera.</span>
    <span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_targets</span><span class="p">()</span>
    <span class="n">blocks</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">blocks</span><span class="o">.</span><span class="n">detections</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    
    <span class="n">nearest</span> <span class="o">=</span> <span class="n">blocks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">x_dist</span> <span class="o">=</span> <span class="n">nearest</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> 
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_dist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span> 
        
    <span class="c1"># Third test: The block never seems to affect the sonar in the simulator. </span>
    <span class="c1"># Also, the grasped block rarely seems to be recognized in the simulator. </span>
    <span class="c1"># Which is whack. </span>
    <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.has_home_gps_location">
    <p>def <span class="ident">has_home_gps_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Check to see if the home location parameter is set.</p>
<p>Returns:</p>
<ul>
<li>(<code>bool</code>): True if the parameter exists, False otherwise.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.has_home_gps_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.has_home_gps_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">has_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Check to see if the home location parameter is set.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    </span>
<span class="sd">    * (`bool`): True if the parameter exists, False otherwise.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.has_home_odom_location">
    <p>def <span class="ident">has_home_odom_location</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Check to see if the home odometry location parameter is set.</p>
<p>Returns:</p>
<ul>
<li>(<code>bool</code>): <code>True</code> if the parameter exists, <code>False</code> otherwise.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.has_home_odom_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.has_home_odom_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">has_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Check to see if the home odometry location parameter is set.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    </span>
<span class="sd">    * (`bool`): `True` if the parameter exists, `False` otherwise.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">rospy</span><span class="o">.</span><span class="n">has_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.pickup">
    <p>def <span class="ident">pickup</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Picks up the block</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.pickup', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.pickup" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">pickup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Picks up the block&#39;&#39;&#39;</span>
    <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator_running</span><span class="p">():</span>
        <span class="n">finger_close_angle</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="n">finger_close_angle</span><span class="p">)</span> <span class="c1">#close</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
    <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has_block</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.print_infoLog">
    <p>def <span class="ident">print_infoLog</span>(</p><p>self, msg)</p>
    </div>
    

    
  
    <div class="desc"><p>Print a message to the /infoLog topic this is viewable in the GUI</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.print_infoLog', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.print_infoLog" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_infoLog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Print a message to the /infoLog topic this is viewable in the GUI&#39;&#39;&#39;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">info_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.print_state_machine">
    <p>def <span class="ident">print_state_machine</span>(</p><p>self, msg)</p>
    </div>
    

    
  
    <div class="desc"><p>Print a message to the /rover/state_machine topic.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.print_state_machine', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.print_state_machine" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_state_machine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Print a message to the /rover/state_machine topic.&#39;&#39;&#39;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">sm_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.print_status">
    <p>def <span class="ident">print_status</span>(</p><p>self, msg)</p>
    </div>
    

    
  
    <div class="desc"><p>Print a message to the /rover/status topic this is viewable in the GUI</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.print_status', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.print_status" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">print_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Print a message to the /rover/status topic this is viewable in the GUI&#39;&#39;&#39;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">msg</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">status_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.putdown">
    <p>def <span class="ident">putdown</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Puts the block down</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.putdown', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.putdown" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">putdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Puts the block down&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_wrist_angle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_finger_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#open</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_up</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.set_finger_angle">
    <p>def <span class="ident">set_finger_angle</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the finger angle to the spedified angle</p>
<p>Args:</p>
<ul>
<li><code>angle</code> (<code>float</code>) Finger angle in radians.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.set_finger_angle', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.set_finger_angle" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">set_finger_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Set the finger angle to the spedified angle</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    </span>
<span class="sd">    * `angle` (`float`) Finger angle in radians.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">finger_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.set_heading">
    <p>def <span class="ident">set_heading</span>(</p><p>self, heading, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn to face an absolute heading in radians. (zero is east)</p>
<p>Arguments:</p>
<ul>
<li><code>heading</code>: (<code>float</code>) The heading in radians.</li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.set_heading', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.set_heading" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">set_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Turn to face an absolute heading in radians. (zero is east)</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">    </span>
<span class="sd">    * `heading`: (`float`) The heading in radians.</span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">        </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_odom_location</span><span class="p">()</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">shortest_angular_distance</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.set_home_gps_location">
    <p>def <span class="ident">set_home_gps_location</span>(</p><p>self, loc)</p>
    </div>
    

    
  
    <div class="desc"><p>Remember the home GPS location reading. The location can be recalled by other 
control programs. </p>
<p>Arguments:</p>
<ul>
<li>loc: (<a href="#mobility.swarmie.Location"><code>Location</code></a>) The GPS coordinates to remember.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.set_home_gps_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.set_home_gps_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">set_home_gps_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Remember the home GPS location reading. The location can be recalled by other </span>
<span class="sd">    control programs. </span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">    </span>
<span class="sd">    * loc: (`mobility.swarmie.Location`) The GPS coordinates to remember. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_gps&#39;</span><span class="p">,</span> 
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                     <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.set_home_odom_location">
    <p>def <span class="ident">set_home_odom_location</span>(</p><p>self, loc)</p>
    </div>
    

    
  
    <div class="desc"><p>Remember the home odometry location. The location can be recalled by other 
control programs. Set this every time we see the nest to minimize the effect
of drift. </p>
<p>Arguments:</p>
<ul>
<li>loc: (<a href="#mobility.swarmie.Location"><code>Location</code></a>) The coordinates to remember.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.set_home_odom_location', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.set_home_odom_location" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">set_home_odom_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Remember the home odometry location. The location can be recalled by other </span>
<span class="sd">    control programs. Set this every time we see the nest to minimize the effect</span>
<span class="sd">    of drift. </span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">    </span>
<span class="sd">    * loc: (`mobility.swarmie.Location`) The coordinates to remember. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">rospy</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rover_name</span> <span class="o">+</span> <span class="s1">&#39;/home_odom&#39;</span><span class="p">,</span> 
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> 
                     <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">loc</span><span class="o">.</span><span class="n">Odometry</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.set_wrist_angle">
    <p>def <span class="ident">set_wrist_angle</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the wrist angle to the specified angle</p>
<p>Args:</p>
<ul>
<li><code>angle</code> (<code>float</code>) Wrist angle in radians.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.set_wrist_angle', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.set_wrist_angle" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">set_wrist_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Set the wrist angle to the specified angle</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    </span>
<span class="sd">    * `angle` (`float`) Wrist angle in radians. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.simulator_running">
    <p>def <span class="ident">simulator_running</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Helper Returns True if there is a /gazebo/link_states topic otherwise False</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.simulator_running', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.simulator_running" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">simulator_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="sd">&#39;&#39;&#39;Helper Returns True if there is a /gazebo/link_states topic otherwise False&#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_published_topics</span><span class="p">():</span> 
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/gazebo/link_states&#39;</span> <span class="p">:</span>
            <span class="c1"># This is the simulator</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.start_magnetometer_calibration">
    <p>def <span class="ident">start_magnetometer_calibration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Start calibrating the magnetometer on a rover.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.start_magnetometer_calibration', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.start_magnetometer_calibration" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">start_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Start calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_start_magnetometer_calibration</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.stop">
    <p>def <span class="ident">stop</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Stop the rover by placing it in manual mode.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.stop', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.stop" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Stop the rover by placing it in manual mode.&#39;&#39;&#39;</span> 
    <span class="n">msg</span> <span class="o">=</span> <span class="n">UInt8</span><span class="p">()</span> 
    <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.store_magnetometer_calibration">
    <p>def <span class="ident">store_magnetometer_calibration</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Finish calibrating the magnetometer on a rover.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.store_magnetometer_calibration', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.store_magnetometer_calibration" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">store_magnetometer_calibration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Finish calibrating the magnetometer on a rover.&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_store_magnetometer_calibration</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.timed_drive">
    <p>def <span class="ident">timed_drive</span>(</p><p>self, time, linear, angular, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Send the specified velocity command for a given period of time.</p>
<p>Args:</p>
<ul>
<li>time (float) The duration of the timed command. </li>
<li>linear (float) The linear velocity of the rover (m/s) </li>
<li>
<p>angular (float) The angular velocity of the rover (radians/s) </p>
<p>SEE: Keyword Arguments for drive commands </p>
</li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.timed_drive', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.timed_drive" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">timed_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">angular</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Send the specified velocity command for a given period of time.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    </span>
<span class="sd">    * time (float) The duration of the timed command. </span>
<span class="sd">    * linear (float) The linear velocity of the rover (m/s) </span>
<span class="sd">    * angular (float) The angular velocity of the rover (radians/s) </span>
<span class="sd">        SEE: Keyword Arguments for drive commands </span>
<span class="sd">        </span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
        <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
        <span class="n">linear</span><span class="o">=</span><span class="n">linear</span><span class="p">,</span> 
        <span class="n">angular</span><span class="o">=</span><span class="n">angular</span><span class="p">,</span> 
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.turn">
    <p>def <span class="ident">turn</span>(</p><p>self, theta, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn theta degrees </p>
<p>Args: </p>
<ul>
<li><code>theta</code> (float) Radians to turn </li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.turn', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.turn" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Turn theta degrees </span>
<span class="sd">    </span>
<span class="sd">    Args: </span>
<span class="sd">    </span>
<span class="sd">    * `theta` (float) Radians to turn </span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> 
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.wait">
    <p>def <span class="ident">wait</span>(</p><p>self, time, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait for a period of time. This can be used to check for obstacles</p>
<p>Args:</p>
<ul>
<li><code>time</code> (<code>float</code>) seconds to wait. </li>
</ul>
<p>Keyword Arguments/Returns/Raises:</p>
<ul>
<li>See <a href="#mobility.swarmie.Swarmie.drive"><code>drive</code></a></li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.wait', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.wait" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Wait for a period of time. This can be used to check for obstacles</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    * `time` (`float`) seconds to wait. </span>
<span class="sd">        </span>
<span class="sd">    Keyword Arguments/Returns/Raises:</span>
<span class="sd">    </span>
<span class="sd">    * See `mobility.swarmie.Swarmie.drive`</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">MoveRequest</span><span class="p">(</span>
        <span class="n">timer</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> 
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__drive</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.wait_for_fix">
    <p>def <span class="ident">wait_for_fix</span>(</p><p>self, distance=4, time=30)</p>
    </div>
    

    
  
    <div class="desc"><p>Wait until the GPS fix is reasonably accurate. This could take a while!</p>
<p>Arguments: </p>
<ul>
<li>
<p><code>distance</code>: (<code>float</code>) The desired accuracty (+/- distance meters) with a likelyhood             of 50%. Defaults to 4 meters.</p>
</li>
<li>
<p><code>time</code>: (<code>int</code>) The number of seconds to wait for a good GPS measurement before giving up.             Defaults to 30 seconds. </p>
</li>
</ul>
<p>Returns: </p>
<ul>
<li>A <a href="#mobility.swarmie.Location"><code>Location</code></a> if the fix was successful. None if we waited until the timeout.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.wait_for_fix', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.wait_for_fix" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wait_for_fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>    
    <span class="sd">&#39;&#39;&#39;Wait until the GPS fix is reasonably accurate. This could take a while!</span>
<span class="sd">    Arguments: </span>
<span class="sd">    * `distance`: (`float`) The desired accuracty (+/- distance meters) with a likelyhood \</span>
<span class="sd">        of 50%. Defaults to 4 meters.</span>
<span class="sd">    * `time`: (`int`) The number of seconds to wait for a good GPS measurement before giving up. \</span>
<span class="sd">        Defaults to 30 seconds. </span>
<span class="sd">    Returns: </span>
<span class="sd">    * A `mobility.swarmie.Location` if the fix was successful. None if we waited until the timeout. </span>
<span class="sd">    &#39;&#39;&#39;</span>        
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="p">:</span> 
        <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gps_location</span><span class="p">()</span>
        <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">get_variances</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">distance</span> <span class="p">:</span> 
            <span class="k">return</span> <span class="n">loc</span> 
    <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.wrist_down">
    <p>def <span class="ident">wrist_down</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Lower the wrist to put it in the pickup position</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.wrist_down', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.wrist_down" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wrist_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Lower the wrist to put it in the pickup position&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">1.25</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.wrist_middle">
    <p>def <span class="ident">wrist_middle</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Put the wrist in the middle of its travel so that the rover can drive with a block</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.wrist_middle', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.wrist_middle" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wrist_middle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Put the wrist in the middle of its travel so that the rover can drive with a block&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.75</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.Swarmie.wrist_up">
    <p>def <span class="ident">wrist_up</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Raise the wrist to the top</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.Swarmie.wrist_up', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.Swarmie.wrist_up" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">wrist_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Raise the wrist to the top&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrist_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Float32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.TagException" class="name">class <span class="ident">TagException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.TagException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.TagException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">TagException</span><span class="p">(</span><span class="n">VisionException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.TagException">TagException</a></li>
          <li><a href="#mobility.swarmie.VisionException">VisionException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.TagException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.TagException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.TagException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.TagException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.VisionException">VisionException</a></code>.<code><a href="#mobility.swarmie.VisionException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.TagException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.TagException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.TimeoutException" class="name">class <span class="ident">TimeoutException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.TimeoutException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.TimeoutException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">TimeoutException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.TimeoutException">TimeoutException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.TimeoutException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.TimeoutException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.TimeoutException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.TimeoutException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.TimeoutException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.TimeoutException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="mobility.swarmie.VisionException" class="name">class <span class="ident">VisionException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.VisionException', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.VisionException" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">VisionException</span><span class="p">(</span><span class="n">DriveException</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#mobility.swarmie.VisionException">VisionException</a></li>
          <li><a href="#mobility.swarmie.DriveException">DriveException</a></li>
          <li>exceptions.Exception</li>
          <li>exceptions.BaseException</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="mobility.swarmie.VisionException.args" class="name">var <span class="ident">args</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.args">args</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="mobility.swarmie.VisionException.message" class="name">var <span class="ident">message</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.message">message</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="mobility.swarmie.VisionException.status" class="name">var <span class="ident">status</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.status">status</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="mobility.swarmie.VisionException.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, st)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#mobility.swarmie.DriveException">DriveException</a></code>.<code><a href="#mobility.swarmie.DriveException.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-mobility.swarmie.VisionException.__init__', this);">Show source &equiv;</a></p>
  <div id="source-mobility.swarmie.VisionException.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">st</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
